import socket
import json


# Create a UDP socket at client side
serverAddressPort = ("127.0.0.1", 65500)
with socket.socket(family=socket.AF_INET, type=socket.SOCK_DGRAM) as UDPClientSocket:

    # Send to server using created UDP socket
    data = {
        "wrist": {"x":0.0,"y":0.0,"z":1.0,"w":1.0},
        "fingers":[{"joints":[{"x":1.0,"y":0.0,"z":0.0,"w":1.0},{"x":0.0,"y":0.0,"z":0.0,"w":0.0},{"x":0.0,"y":0.0,"z":0.0,"w":0.0}]},{"joints":[{"x":1.0,"y":0.0,"z":0.0,"w":1.0},{"x":0.0,"y":0.0,"z":0.0,"w":0.0},{"x":0.0,"y":0.0,"z":0.0,"w":0.0}]},{"joints":[{"x":1.0,"y":0.0,"z":0.0,"w":1.0},{"x":0.0,"y":0.0,"z":0.0,"w":0.0},{"x":0.0,"y":0.0,"z":0.0,"w":0.0}]},{"joints":[{"x":1.0,"y":0.0,"z":0.0,"w":1.0},{"x":0.0,"y":0.0,"z":0.0,"w":0.0},{"x":0.0,"y":0.0,"z":0.0,"w":0.0}]},{"joints":[{"x":1.0,"y":0.0,"z":0.0,"w":1.0},{"x":0.0,"y":0.0,"z":0.0,"w":0.0},{"x":0.0,"y":0.0,"z":0.0,"w":0.0}]}]
    }

    data2 = {"wrist":{"x":0.421607673,"y":0.622808337,"z":-0.359755546,"w":0.552207053},"fingers":[{"joints":[{"x":0.211133376,"y":0.207282782,"z":0.282211274,"w":0.912585974},{"x":0.211133376,"y":0.207282782,"z":0.282211274,"w":0.912585974},{"x":0.211133376,"y":0.207282782,"z":0.282211274,"w":0.912585974}]},{"joints":[{"x":0.384124756,"y":0.335279524,"z":0.240790814,"w":0.825863719},{"x":0.384124756,"y":0.335279524,"z":0.240790814,"w":0.825863719},{"x":0.384124756,"y":0.335279524,"z":0.240790814,"w":0.825863719}]},{"joints":[{"x":0.072317801,"y":0.28282243,"z":0.318837404,"w":0.901733994},{"x":0.072317801,"y":0.28282243,"z":0.318837404,"w":0.901733994},{"x":0.072317801,"y":0.28282243,"z":0.318837404,"w":0.901733994}]},{"joints":[{"x":0.529289484,"y":0.419010311,"z":0.044832889,"w":0.736389935},{"x":0.529289484,"y":0.419010311,"z":0.044832889,"w":0.736389935},{"x":0.529289484,"y":0.419010311,"z":0.044832889,"w":0.736389935}]},{"joints":[{"x":0.441837668,"y":0.356611133,"z":0.610308588,"w":0.55238694},{"x":0.441837668,"y":0.356611133,"z":0.610308588,"w":0.55238694},{"x":0.441837668,"y":0.356611133,"z":0.610308588,"w":0.55238694}]}]} 

    while True:
        w = float(input(""))
        data2["fingers"][0]["joints"][0]["w"] = w
        dataJSON = str.encode(json.dumps(data2))
        UDPClientSocket.sendto(dataJSON, serverAddressPort)


